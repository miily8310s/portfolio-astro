---
import type { CollectionEntry } from "astro:content";
import BaseLayout from "./BaseLayout.astro";
import Container from '../components/Container.astro';
import FormattedDate from '../components/FormattedDate.astro';
import { Image } from "astro:assets";

type Props = CollectionEntry<"blog">["data"];

const { title, pubDate, image, tags } = Astro.props;
---
<BaseLayout pageTitle={title}>
  <Container>
    <article>
      {
        image && (
          <div class="mb-8 block rounded-lg overflow-hidden">
            <figure class="w-auto h-auto md:[480px] object-cover">
              <Image src={image.url} alt={image.alt} width={960} height={480} decoding='async' loading='lazy'
              class='transition duration-300 ease-in-out' />
            </figure>
          </div>
        )
      }
      <div class="md:col-10 text-center mb-12">
        <h1 class="text-md lg:text-xl font-bold dark:text-white">{title}</h1>
        <div class="mt-2 flex flex-wrap items-center justify-center text-zinc-800">
          <div class="mx-3 flex items-center gap-2 font-medium">
            <svg width="24" height="24" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg">
                <path  d="M19 19H5V8h14m-3-7v2H8V1H6v2H5c-1.11 0-2 .89-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2V5a2 2 0 0 0-2-2h-1V1m-1 11h-5v5h5v-5Z"/>
                <style>
                  path { fill: #000; }
                  .dark path {
                    fill: #FFF;
                  }
                </style>
            </svg>
            <FormattedDate date={pubDate} />
          </div>
          <div class="w-full md:w-auto flex flex-wrap gap-3 justify-center">
            {tags.map((tag) => (
              <span class="text-gray-500 dark:text-gray-200"><a href={`/tags/${tag}`}>#{tag}</a></span>
            ))}
          </div>
        </div>
      </div>
      <div class="min-w-full prose lg:prose-lg dark:prose-invert">
        <slot />
      </div>
    </article>
  </Container>
</BaseLayout>